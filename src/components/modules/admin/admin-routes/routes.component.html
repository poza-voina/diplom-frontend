<!-- Панель фильтров и кнопка создания -->
<div class="container-lg d-flex flex-wrap justify-content-between align-items-center gap-2 p-2 mb-3 bg-light rounded shadow-sm">
  <!-- Левая часть: сортировка и фильтры -->
  <div class="d-flex flex-wrap align-items-center gap-2">
    <!-- Сортировка -->
    <div class="dropdown" id="sortingButtons">
      <button class="btn btn-sm btn-primary dropdown-toggle" type="button" (click)="dropDownHandler('sortingButtons')" data-bs-toggle="dropdown" aria-expanded="false">
        {{ RoutesSortHelper.getDescription(selectedSort) }}
      </button>
      <ul class="dropdown-menu">
        <ng-container *ngFor="let sortingType of othersSort">
          <li>
            <button class="dropdown-item btn btn-sm" (click)="handleSortRoutes(sortingType);dropDownHandler('sortingButtons')">
              {{ RoutesSortHelper.getDescription(sortingType) }}
            </button>
          </li>
        </ng-container>
      </ul>
    </div>

    <!-- Фильтры -->
    <div class="form-check form-switch m-0">
      <input class="form-check-input" type="checkbox" id="showHidden" (click)="showHiddenRoute($event)">
      <label class="form-check-label" for="showHidden">Показать скрытые</label>
    </div>

    <div class="form-check form-switch m-0">
      <input class="form-check-input" type="checkbox" id="showVisible" (click)="showVisibleRoute($event)">
      <label class="form-check-label" for="showVisible">Показывать видимые</label>
    </div>
  </div>

  <!-- Строка поиска -->
  <div class="d-flex input-group input-group-sm" style="max-width: 400px">
    <input
      type="text"
      class="form-control"
      placeholder="Поиск маршрутов"
      aria-label="Поиск маршрутов"
      aria-describedby="search-icon"
    >
    <span class="input-group-text" id="search-icon"><i class="bi bi-search"></i></span>
  </div>

  <!-- Правая часть: кнопка создания -->
  <div>
    <button class="btn btn-sm btn-success d-flex align-items-center gap-1" (click)="goToNewRoute()">
      <i class="bi bi-plus"></i> Создать маршрут
    </button>
  </div>
</div>

<!-- Список маршрутов -->
<div class="container-lg routes">
  <ng-container [ngSwitch]="routesLoadingStatus">
    <!-- Загрузка -->
    <div *ngSwitchCase="RoutesLoadingStatus.Loading" class="d-flex flex-column align-items-center justify-content-center py-5">
      <div class="mb-2">Идёт загрузка маршрутов...</div>
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Загрузка...</span>
      </div>
    </div>

    <!-- Ошибка -->
    <div *ngSwitchCase="RoutesLoadingStatus.Error" class="alert alert-danger text-center" role="alert">
      Не удалось загрузить маршруты.
    </div>

    <!-- Успешная загрузка -->
    <ng-container *ngSwitchCase="RoutesLoadingStatus.Completed">
      <div *ngFor="let item of routes; let i = index" class="card mb-3 shadow-sm">
        <div class="card-body cursor-pointer" (click)="goToRoute(item.id)">
          <h5 class="card-title mb-2">{{ item.title }}</h5>
          <p class="card-text mb-0">
            <strong>Дата создания:</strong> {{ item.createdAt | date: 'dd.MM.yyyy' }}
          </p>
        </div>
        <div class="card-footer d-flex justify-content-end gap-2">
          <!-- Скрыть/показать -->
          <button (click)="item.isHidden ? showRoute($event, item) : hideRoute($event, item)" class="btn btn-sm btn-outline-primary d-flex align-items-center gap-1">
            <i [class]="'bi ' + (item.isHidden ? 'bi-eye-slash' : 'bi-eye')"></i>
            <div *ngIf="routesStatuses.getStatus(item) == RouteStatus.ToggleVisibility" class="spinner-border spinner-border-sm text-primary ms-1" role="status">
              <span class="visually-hidden">Загрузка</span>
            </div>
          </button>

          <!-- Удалить -->
          <button class="btn btn-sm btn-outline-danger" (click)="removeRoute($event, i)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
    </ng-container>
  </ng-container>

  <app-paggination
    [currentPage]="currentPage"
    [totalPages]="totalPages"
    [itemsPerPage]="itemsPerPage">
  </app-paggination>
</div>
